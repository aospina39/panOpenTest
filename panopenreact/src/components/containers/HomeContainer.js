import React, { Component} from 'react';
import axios from "axios";


class HomeContainer extends Component{
  
    constructor() {
        super();
        this.state = {
            prompt: '',
            form: {
                name: '',
                email: '',
            }
          };
    
        this.handleChange = this.handleChange.bind(this);
        this.handleSubmit = this.handleSubmit.bind(this);
      }
    
      handleChange = key => e => {
        let newForm = {
          ...this.state.form,
          [key]: e.target.value
        }
        this.setState({
          form: newForm
        })
      }
    
      handleSubmit(event) {
        const data = { 
              name_user: this.state.form.name, 
              email: this.state.form.email 
        };
        axios.post('http://localhost:3000/index/change_name',data)
        .then(result=>{
            alert(result.data.msg);
        }).catch(console.log)

        event.preventDefault();
      }

  render(){
    let { name, email } = this.state.form
      return(
        <form onSubmit={this.handleSubmit}>
            <label>
                Email Para Actualizar: 
                <input type="email" value={email} onChange={this.handleChange('email')} required placeholder="E-mail*" />
            </label><br></br>
            <label>
                Nombre Estudiante:
                <input type="text" value={name} onChange={this.handleChange('name')} required placeholder="Nombre*" />
            </label><br></br>
            <input type="submit" value="Enviar" />
        </form>

      );
  }



}

export default HomeContainer;